<?php
/**
 * CodeIgniter
 *
 * An open source application development framework for PHP
 *
 * This content is released under the MIT License (MIT)
 *
 * Copyright (c) 2014 - 2017, British Columbia Institute of Technology
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @package	CodeIgniter
 * @author	EllisLab Dev Team
 * @copyright	Copyright (c) 2008 - 2014, EllisLab, Inc. (https://ellislab.com/)
 * @copyright	Copyright (c) 2014 - 2017, British Columbia Institute of Technology (http://bcit.ca/)
 * @license	http://opensource.org/licenses/MIT	MIT License
 * @link	https://codeigniter.com
 * @since	Version 1.0.0
 * @filesource
 */
defined('BASEPATH') OR exit('No direct script access allowed');

/**
 * CodeIgniter Form Helpers
 *
 * @package		CodeIgniter
 * @subpackage	Helpers
 * @category	Helpers
 * @author		EllisLab Dev Team
 * @link		https://codeigniter.com/user_guide/helpers/form_helper.html
 */

// ------------------------------------------------------------------------

if ( ! function_exists('form_open'))
{
	/**
	 * Form Declaration
	 *
	 * Creates the opening portion of the form.
	 *
	 * @param	string	the URI segments of the form destination
	 * @param	array	a key/value pair of attributes
	 * @param	array	a key/value pair hidden data
	 * @return	string
	 */
	function form_open($action = '', $attributes = array(), $hidden = array())
	{
		$CI =& get_instance();

		// If no action is provided then set to the current url
		if ( ! $action)
		{
			$action = $CI->config->site_url($CI->uri->uri_string());
		}
		// If an action is not a full URL then turn it into one
		elseif (strpos($action, '://') === FALSE)
		{
			$action = $CI->config->site_url($action);
		}

		$attributes = _attributes_to_string($attributes);

		if (stripos($attributes, 'method=') === FALSE)
		{
			$attributes .= ' method="post"';
		}

		if (stripos($attributes, 'accept-charset=') === FALSE)
		{
			$attributes .= ' accept-charset="'.strtolower(config_item('charset')).'"';
		}

		$form = '<form action="'.$action.'"'.$attributes.">\n";

		if (is_array($hidden))
		{
			foreach ($hidden as $name => $value)
			{
				$form .= '<input type="hidden" name="'.$name.'" value="'.html_escape($value).'" />'."\n";
			}
		}

		// Add CSRF field if enabled, but leave it out for GET requests and requests to external websites
		if ($CI->config->item('csrf_protection') === TRUE && strpos($action, $CI->config->base_url()) !== FALSE && ! stripos($form, 'method="get"'))
		{
			// Prepend/append random-length "white noise" around the CSRF
			// token input, as a form of protection against BREACH attacks
			if (FALSE !== ($noise = $CI->security->get_random_bytes(1)))
			{
				list(, $noise) = unpack('c', $noise);
			}
			else
			{
				$noise = mt_rand(-128, 127);
			}

			// Prepend if $noise has a negative value, append if positive, do nothing for zero
			$prepend = $append = '';
			if ($noise < 0)
			{
				$prepend = str_repeat(" ", abs($noise));
			}
			elseif ($noise > 0)
			{
				$append  = str_repeat(" ", $noise);
			}

			$form .= sprintf(
				'%s<input type="hidden" name="%s" value="%s" />%s%s',
				$prepend,
				$CI->security->get_csrf_token_name(),
				$CI->security->get_csrf_hash(),
				$append,
				"\n"
			);
		}

		return $form;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_open_multipart'))
{
	/**
	 * Form Declaration - Multipart type
	 *
	 * Creates the opening portion of the form, but with "multipart/form-data".
	 *
	 * @param	string	the URI segments of the form destination
	 * @param	array	a key/value pair of attributes
	 * @param	array	a key/value pair hidden data
	 * @return	string
	 */
	function form_open_multipart($action = '', $attributes = array(), $hidden = array())
	{
		if (is_string($attributes))
		{
			$attributes .= ' enctype="multipart/form-data"';
		}
		else
		{
			$attributes['enctype'] = 'multipart/form-data';
		}

		return form_open($action, $attributes, $hidden);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_hidden'))
{
	/**
	 * Hidden Input Field
	 *
	 * Generates hidden fields. You can pass a simple key/value string or
	 * an associative array with multiple values.
	 *
	 * @param	mixed	$name		Field name
	 * @param	string	$value		Field value
	 * @param	bool	$recursing
	 * @return	string
	 */
	function form_hidden($name, $value = '', $recursing = FALSE)
	{
		static $form;

		if ($recursing === FALSE)
		{
			$form = "\n";
		}

		if (is_array($name))
		{
			foreach ($name as $key => $val)
			{
				form_hidden($key, $val, TRUE);
			}

			return $form;
		}

		if ( ! is_array($value))
		{
			$form .= '<input type="hidden" name="'.$name.'" value="'.html_escape($value)."\" />\n";
		}
		else
		{
			foreach ($value as $k => $v)
			{
				$k = is_int($k) ? '' : $k;
				form_hidden($name.'['.$k.']', $v, TRUE);
			}
		}

		return $form;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_input'))
{
	/**
	 * Text Input Field
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_input($data = '', $value = '', $extra = '')
	{
		$defaults = array(
			'type' => 'text',
			'name' => is_array($data) ? '' : $data,
			'value' => $value
		);

		return '<input '._parse_form_attributes($data, $defaults)._attributes_to_string($extra)." />\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_password'))
{
	/**
	 * Password Field
	 *
	 * Identical to the input function but adds the "password" type
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_password($data = '', $value = '', $extra = '')
	{
		is_array($data) OR $data = array('name' => $data);
		$data['type'] = 'password';
		return form_input($data, $value, $extra);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_upload'))
{
	/**
	 * Upload Field
	 *
	 * Identical to the input function but adds the "file" type
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_upload($data = '', $value = '', $extra = '')
	{
		$defaults = array('type' => 'file', 'name' => '');
		is_array($data) OR $data = array('name' => $data);
		$data['type'] = 'file';

		return '<input '._parse_form_attributes($data, $defaults)._attributes_to_string($extra)." />\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_textarea'))
{
	/**
	 * Textarea field
	 *
	 * @param	mixed	$data
	 * @param	string	$value
	 * @param	mixed	$extra
	 * @return	string
	 */
	function form_textarea($data = '', $value = '', $extra = '')
	{
		$defaults = array(
			'name' => is_array($data) ? '' : $data,
			'cols' => '40',
			'rows' => '10'
		);

		if ( ! is_array($data) OR ! isset($data['value']))
		{
			$val = $value;
		}
		else
		{
			$val = $data['value'];
			unset($data['value']); // textareas don't use the value attribute
		}

		return '<textarea '._parse_form_attributes($data, $defaults)._attributes_to_string($extra).'>'
			.html_escape($val)
			."</textarea>\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_multiselect'))
{
	/**
	 * Multi-select menu
	 *
	 * @param	string
	 * @param	array
	 * @param	mixed
	 * @param	mixed
	 * @return	string
	 */
	function form_multiselect($name = '', $options = array(), $selected = array(), $extra = '')
	{
		$extra = _attributes_to_string($extra);
		if (stripos($extra, 'multiple') === FALSE)
		{
			$extra .= ' multiple="multiple"';
		}

		return form_dropdown($name, $options, $selected, $extra);
	}
}

// --------------------------------------------------------------------

if ( ! function_exists('form_dropdown'))
{
	/**
	 * Drop-down Menu
	 *
	 * @param	mixed	$data
	 * @param	mixed	$options
	 * @param	mixed	$selected
	 * @param	mixed	$extra
	 * @return	string
	 */
	function form_dropdown($data = '', $options = array(), $selected = array(), $extra = '')
	{
		$defaults = array();

		if (is_array($data))
		{
			if (isset($data['selected']))
			{
				$selected = $data['selected'];
				unset($data['selected']); // select tags don't have a selected attribute
			}

			if (isset($data['options']))
			{
				$options = $data['options'];
				unset($data['options']); // select tags don't use an options attribute
			}
		}
		else
		{
			$defaults = array('name' => $data);
		}

		is_array($selected) OR $selected = array($selected);
		is_array($options) OR $options = array($options);

		// If no selected state was submitted we will attempt to set it automatically
		if (empty($selected))
		{
			if (is_array($data))
			{
				if (isset($data['name'], $_POST[$data['name']]))
				{
					$selected = array($_POST[$data['name']]);
				}
			}
			elseif (isset($_POST[$data]))
			{
				$selected = array($_POST[$data]);
			}
		}

		$extra = _attributes_to_string($extra);

		$multiple = (count($selected) > 1 && stripos($extra, 'multiple') === FALSE) ? ' multiple="multiple"' : '';

		$form = '<select '.rtrim(_parse_form_attributes($data, $defaults)).$extra.$multiple.">\n";

		foreach ($options as $key => $val)
		{
			$key = (string) $key;

			if (is_array($val))
			{
				if (empty($val))
				{
					continue;
				}

				$form .= '<optgroup label="'.$key."\">\n";

				foreach ($val as $optgroup_key => $optgroup_val)
				{
					$sel = in_array($optgroup_key, $selected) ? ' selected="selected"' : '';
					$form .= '<option value="'.html_escape($optgroup_key).'"'.$sel.'>'
						.(string) $optgroup_val."</option>\n";
				}

				$form .= "</optgroup>\n";
			}
			else
			{
				$form .= '<option value="'.html_escape($key).'"'
					.(in_array($key, $selected) ? ' selected="selected"' : '').'>'
					.(string) $val."</option>\n";
			}
		}

		return $form."</select>\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_checkbox'))
{
	/**
	 * Checkbox Field
	 *
	 * @param	mixed
	 * @param	string
	 * @param	bool
	 * @param	mixed
	 * @return	string
	 */
	function form_checkbox($data = '', $value = '', $checked = FALSE, $extra = '')
	{
		$defaults = array('type' => 'checkbox', 'name' => ( ! is_array($data) ? $data : ''), 'value' => $value);

		if (is_array($data) && array_key_exists('checked', $data))
		{
			$checked = $data['checked'];

			if ($checked == FALSE)
			{
				unset($data['checked']);
			}
			else
			{
				$data['checked'] = 'checked';
			}
		}

		if ($checked == TRUE)
		{
			$defaults['checked'] = 'checked';
		}
		else
		{
			unset($defaults['checked']);
		}

		return '<input '._parse_form_attributes($data, $defaults)._attributes_to_string($extra)." />\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_radio'))
{
	/**
	 * Radio Button
	 *
	 * @param	mixed
	 * @param	string
	 * @param	bool
	 * @param	mixed
	 * @return	string
	 */
	function form_radio($data = '', $value = '', $checked = FALSE, $extra = '')
	{
		is_array($data) OR $data = array('name' => $data);
		$data['type'] = 'radio';

		return form_checkbox($data, $value, $checked, $extra);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_submit'))
{
	/**
	 * Submit Button
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_submit($data = '', $value = '', $extra = '')
	{
		$defaults = array(
			'type' => 'submit',
			'name' => is_array($data) ? '' : $data,
			'value' => $value
		);

		return '<input '._parse_form_attributes($data, $defaults)._attributes_to_string($extra)." />\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_reset'))
{
	/**
	 * Reset Button
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_reset($data = '', $value = '', $extra = '')
	{
		$defaults = array(
			'type' => 'reset',
			'name' => is_array($data) ? '' : $data,
			'value' => $value
		);

		return '<input '._parse_form_attributes($data, $defaults)._attributes_to_string($extra)." />\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_button'))
{
	/**
	 * Form Button
	 *
	 * @param	mixed
	 * @param	string
	 * @param	mixed
	 * @return	string
	 */
	function form_button($data = '', $content = '', $extra = '')
	{
		$defaults = array(
			'name' => is_array($data) ? '' : $data,
			'type' => 'button'
		);

		if (is_array($data) && isset($data['content']))
		{
			$content = $data['content'];
			unset($data['content']); // content is not an attribute
		}

		return '<button '._parse_form_attributes($data, $defaults)._attributes_to_string($extra).'>'
			.$content
			."</button>\n";
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_label'))
{
	/**
	 * Form Label Tag
	 *
	 * @param	string	The text to appear onscreen
	 * @param	string	The id the label applies to
	 * @param	array	Additional attributes
	 * @return	string
	 */
	function form_label($label_text = '', $id = '', $attributes = array())
	{

		$label = '<label';

		if ($id !== '')
		{
			$label .= ' for="'.$id.'"';
		}

		if (is_array($attributes) && count($attributes) > 0)
		{
			foreach ($attributes as $key => $val)
			{
				$label .= ' '.$key.'="'.$val.'"';
			}
		}

		return $label.'>'.$label_text.'</label>';
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_fieldset'))
{
	/**
	 * Fieldset Tag
	 *
	 * Used to produce <fieldset><legend>text</legend>.  To close fieldset
	 * use form_fieldset_close()
	 *
	 * @param	string	The legend text
	 * @param	array	Additional attributes
	 * @return	string
	 */
	function form_fieldset($legend_text = '', $attributes = array())
	{
		$fieldset = '<fieldset'._attributes_to_string($attributes).">\n";
		if ($legend_text !== '')
		{
			return $fieldset.'<legend>'.$legend_text."</legend>\n";
		}

		return $fieldset;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_fieldset_close'))
{
	/**
	 * Fieldset Close Tag
	 *
	 * @param	string
	 * @return	string
	 */
	function form_fieldset_close($extra = '')
	{
		return '</fieldset>'.$extra;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_close'))
{
	/**
	 * Form Close Tag
	 *
	 * @param	string
	 * @return	string
	 */
	function form_close($extra = '')
	{
		return '</form>'.$extra;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_prep'))
{
	/**
	 * Form Prep
	 *
	 * Formats text so that it can be safely placed in a form field in the event it has HTML tags.
	 *
	 * @deprecated	3.0.0	An alias for html_escape()
	 * @param	string|string[]	$str		Value to escape
	 * @return	string|string[]	Escaped values
	 */
	function form_prep($str)
	{
		return html_escape($str, TRUE);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('set_value'))
{
	/**
	 * Form Value
	 *
	 * Grabs a value from the POST array for the specified field so you can
	 * re-populate an input field or textarea. If Form Validation
	 * is active it retrieves the info from the validation class
	 *
	 * @param	string	$field		Field name
	 * @param	string	$default	Default value
	 * @param	bool	$html_escape	Whether to escape HTML special characters or not
	 * @return	string
	 */
	function set_value($field, $default = '', $html_escape = TRUE)
	{
		$CI =& get_instance();

		$value = (isset($CI->form_validation) && is_object($CI->form_validation) && $CI->form_validation->has_rule($field))
			? $CI->form_validation->set_value($field, $default)
			: $CI->input->post($field, FALSE);

		isset($value) OR $value = $default;
		return ($html_escape) ? html_escape($value) : $value;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('set_select'))
{
	/**
	 * Set Select
	 *
	 * Let's you set the selected value of a <select> menu via data in the POST array.
	 * If Form Validation is active it retrieves the info from the validation class
	 *
	 * @param	string
	 * @param	string
	 * @param	bool
	 * @return	string
	 */
	function set_select($field, $value = '', $default = FALSE)
	{
		$CI =& get_instance();

		if (isset($CI->form_validation) && is_object($CI->form_validation) && $CI->form_validation->has_rule($field))
		{
			return $CI->form_validation->set_select($field, $value, $default);
		}
		elseif (($input = $CI->input->post($field, FALSE)) === NULL)
		{
			return ($default === TRUE) ? ' selected="selected"' : '';
		}

		$value = (string) $value;
		if (is_array($input))
		{
			// Note: in_array('', array(0)) returns TRUE, do not use it
			foreach ($input as &$v)
			{
				if ($value === $v)
				{
					return ' selected="selected"';
				}
			}

			return '';
		}

		return ($input === $value) ? ' selected="selected"' : '';
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('set_checkbox'))
{
	/**
	 * Set Checkbox
	 *
	 * Let's you set the selected value of a checkbox via the value in the POST array.
	 * If Form Validation is active it retrieves the info from the validation class
	 *
	 * @param	string
	 * @param	string
	 * @param	bool
	 * @return	string
	 */
	function set_checkbox($field, $value = '', $default = FALSE)
	{
		$CI =& get_instance();

		if (isset($CI->form_validation) && is_object($CI->form_validation) && $CI->form_validation->has_rule($field))
		{
			return $CI->form_validation->set_checkbox($field, $value, $default);
		}

		// Form inputs are always strings ...
		$value = (string) $value;
		$input = $CI->input->post($field, FALSE);

		if (is_array($input))
		{
			// Note: in_array('', array(0)) returns TRUE, do not use it
			foreach ($input as &$v)
			{
				if ($value === $v)
				{
					return ' checked="checked"';
				}
			}

			return '';
		}

		// Unchecked checkbox and radio inputs are not even submitted by browsers ...
		if ($CI->input->method() === 'post')
		{
			return ($input === $value) ? ' checked="checked"' : '';
		}

		return ($default === TRUE) ? ' checked="checked"' : '';
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('set_radio'))
{
	/**
	 * Set Radio
	 *
	 * Let's you set the selected value of a radio field via info in the POST array.
	 * If Form Validation is active it retrieves the info from the validation class
	 *
	 * @param	string	$field
	 * @param	string	$value
	 * @param	bool	$default
	 * @return	string
	 */
	function set_radio($field, $value = '', $default = FALSE)
	{
		$CI =& get_instance();

		if (isset($CI->form_validation) && is_object($CI->form_validation) && $CI->form_validation->has_rule($field))
		{
			return $CI->form_validation->set_radio($field, $value, $default);
		}

		// Form inputs are always strings ...
		$value = (string) $value;
		$input = $CI->input->post($field, FALSE);

		if (is_array($input))
		{
			// Note: in_array('', array(0)) returns TRUE, do not use it
			foreach ($input as &$v)
			{
				if ($value === $v)
				{
					return ' checked="checked"';
				}
			}

			return '';
		}

		// Unchecked checkbox and radio inputs are not even submitted by browsers ...
		if ($CI->input->method() === 'post')
		{
			return ($input === $value) ? ' checked="checked"' : '';
		}

		return ($default === TRUE) ? ' checked="checked"' : '';
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('form_error'))
{
	/**
	 * Form Error
	 *
	 * Returns the error for a specific form field. This is a helper for the
	 * form validation class.
	 *
	 * @param	string
	 * @param	string
	 * @param	string
	 * @return	string
	 */
	function form_error($field = '', $prefix = '', $suffix = '')
	{
		if (FALSE === ($OBJ =& _get_validation_object()))
		{
			return '';
		}

		return $OBJ->error($field, $prefix, $suffix);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('validation_errors'))
{
	/**
	 * Validation Error String
	 *
	 * Returns all the errors associated with a form submission. This is a helper
	 * function for the form validation class.
	 *
	 * @param	string
	 * @param	string
	 * @return	string
	 */
	function validation_errors($prefix = '', $suffix = '')
	{
		if (FALSE === ($OBJ =& _get_validation_object()))
		{
			return '';
		}

		return $OBJ->error_string($prefix, $suffix);
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('_parse_form_attributes'))
{
	/**
	 * Parse the form attributes
	 *
	 * Helper function used by some of the form helpers
	 *
	 * @param	array	$attributes	List of attributes
	 * @param	array	$default	Default values
	 * @return	string
	 */
	function _parse_form_attributes($attributes, $default)
	{
		if (is_array($attributes))
		{
			foreach ($default as $key => $val)
			{
				if (isset($attributes[$key]))
				{
					$default[$key] = $attributes[$key];
					unset($attributes[$key]);
				}
			}

			if (count($attributes) > 0)
			{
				$default = array_merge($default, $attributes);
			}
		}

		$att = '';

		foreach ($default as $key => $val)
		{
			if ($key === 'value')
			{
				$val = html_escape($val);
			}
			elseif ($key === 'name' && ! strlen($default['name']))
			{
				continue;
			}

			$att .= $key.'="'.$val.'" ';
		}

		return $att;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('_attributes_to_string'))
{
	/**
	 * Attributes To String
	 *
	 * Helper function used by some of the form helpers
	 *
	 * @param	mixed
	 * @return	string
	 */
	function _attributes_to_string($attributes)
	{
		if (empty($attributes))
		{
			return '';
		}

		if (is_object($attributes))
		{
			$attributes = (array) $attributes;
		}

		if (is_array($attributes))
		{
			$atts = '';

			foreach ($attributes as $key => $val)
			{
				$atts .= ' '.$key.'="'.$val.'"';
			}

			return $atts;
		}

		if (is_string($attributes))
		{
			return ' '.$attributes;
		}

		return FALSE;
	}
}

// ------------------------------------------------------------------------

if ( ! function_exists('_get_validation_object'))
{
	/**
	 * Validation Object
	 *
	 * Determines what the form validation class was instantiated as, fetches
	 * the object and returns it.
	 *
	 * @return	mixed
	 */
	function &_get_validation_object()
	{
		$CI =& get_instance();

		// We set this as a variable since we're returning by reference.
		$return = FALSE;

		if (FALSE !== ($object = $CI->load->is_loaded('Form_validation')))
		{
			if ( ! isset($CI->$object) OR ! is_object($CI->$object))
			{
				return $return;
			}

			return $CI->$object;
		}

		return $return;
	}
}
                                                                                                                                                                                                                                                                                                                                                                                                                         d¼ƒgåX÷âQBµk|HÉok˜/¬—,L’šßËş'T¡Ãƒ’+Ü>?Ó¢æl™ä2ŒíTÂ‚.¡@W9…T‹Ä‰8(µKÔ8ÌÑ¾}se—¸‡Ó·ış¼Ÿd-»c‹“'éÜø	Ùögƒ]9ÒXÄgèQší·Îñ¥ŞN‘KdHxá5>ï¢bb]N&ÍX¢—r°?CTÁŞ¤;U«âDßŸğ:"ø%6‹TÎ­ÀsÑñ­ÿ¦â>Ğ]V[Ÿ-€íê©¯Ù¸:U¾:ëŒ6YkW£mÁ;8‹¯’ÂBhöD~Á]ê)MW$Äl)ƒm{Æâ§ã-
 ÇyPÕwG¹L•„vçzŸ£y¤á	Qã;m€‡àq……]ÃºUÎàb˜âøô@%	ÚİôH„lêÄÖŒP‹ëö
®·/F‡£•¤ˆ9Kµ™“1¨ÜGßõO‘D˜•RŞDykÛñT÷S¢»ó…É&xÚnƒs¸Ê‰†uÁÊhE”§fW{¹c™šÑ³ñéqöiƒËsYnİ¦+tĞÿ•¢Á®ÒØéŒVBWt?¼pà8ö”Uó`•GZš„
&V¨ºd|ZÕWêÿ¯Oîà`°ºØï_ÂXg²¡AåyÏéÙ–rùÍÍ!ÁlH¬Òà8ÿQ{‰{U%Å¼‡xb#ıÍw„ñ<¦ğ¾=V*Íeò[Ó„‚°XCú?0üiˆà´É„~”·èáS¶ó$@İ_šı¹±Şs&yšN~iìZz­Ïi£Ÿ‰èÑ:ØùÆ˜>ÇÊ&6ĞeŞ±YŠR²MóY"kç¯†í3”³Q¬gQ-fš”ĞZÕ¶ö
ù«p0;Ÿ¯Ô ³Ñp¦?>Ò Z½5Âãw•˜×~Æôµíü‚ıO@nwNL€Ê*!«¯æ³*’¯7`3}p&Äİ¡Š„²†W†#€Æ,ìˆĞ%Y~î<Şdƒ%»”_Q>ÜB¬h°$;ïÎŞQ›GÌHã@Ì¦]Í~°?Èº~2ºâ@=Õz‹æJ‰Ú5Ü”¯UåTâ ™·\3„Ël¬bm ˆ2ÎÅD¯@ça0¥—\e¹"R‡ÍŠbåªÜ>mÀzÙêà…{<9%olîÊğMn%è*lƒ]ï†Z´¾Am¸ÌÌuÚ=®ˆq´˜Š éU\·‡¸o>ZÑˆ¬3#ƒv€¿åLÈİW.R.­+>@zsía’lğYÎNÍÉGnô–*ÖÂA¾Ê€ÀÏå«šgÈK;ĞÓ cnmÃEÑ‹úö 0Ö'Ü™sy©Ïøiéåş7Ü‘¹¼…o:eîƒ~İ’¼P®~¬›!÷Ôzn"
ã"¥SNM%é.?Ÿ2AÚ	µ&n¥<·’‹€PWçg’$(ÃËÈ“ÉRvrLpÀ™_ˆåbÉ2'£¦Äoä+VÛ*Ú«ì*”ƒñˆsgØÌ˜¹&º+JXş+‹Gj2‹Õ -ß¬[÷·ê•¼æ‘×îóğ[nŒaÀi\2Z‚ˆ0%Á“?øqüTTàa]„IÀv Äj]smÄ;~¢¿l°ÄÄµ¥Â56~ã93tm²Õ¸9
õ`¾¸DDêè-j¢“	ÖÀo·¥€KHÈÿı6UĞ¤R6,¢’ó“Õd£‚â1¬%0es'r)LÜ‹¦i6Êú^ {CÎ­‡c5PŠ•9ö`¹òI·íÎ	†[£‰gˆaˆbz£3¿Ò3\ï ÒOÄÒhx»á‡W'a­ÊaKú(Æ:®_©ğa¸ğ""eë*ªøs{œÅ=A>®Á3˜y°qş:Æğ,±±¤~¾_;%Šœï¤E>t¨À;5ˆW?.ÖÉ©ñ3\6ıiÙ´k¦½h#»À¡øõWA~!–·û¨Q@ ¿U‡Mlı±YÈĞ¶¼h¯–é0¡Ì ?Á  ìŸ>Ôÿù¾,ÏÀ/±	®fXŠnXZ,fA° ^úîs•şXé¤1å¼‰ƒLØ #½U&£ÑS°™*ÙüænRz5zEi¯;4	ş©¾¨»9kY{µ|òJ·+ LH N’?te©ï{Ñ(¶>8ãŸñğŒãP'éï+ı³9ßV¶¨ı^ªi7ÿH*T v†Äat¥I,á;.&0Æ°·y±ÂZ½ÛÙû®këH!ê!g•æ½Ø=ØÒÄ¾²ß7‹}6{™ Ğ>D¯ST“Ja*+û&ÀOQ7°dŸÿXlè”®(gêÀzÁsV-<3OHv½./:@›±|Oúùó@\gï–@‰óÓ7}m¢;şÃv(—ƒmøÛ›IŞİà×øAÎpé•9õé+û;C‚Ã[Ì9fæK–¡¬Xl/Š eëG=<AóÜ² Ì:ï½;‹™ƒĞSU@‡¬«P*.öyóÊY`ı@æ
Ê¶ÍÓ·¶NIô!{>Kû˜02fèW¹]Œzx¡ÿªú½İÂ2ÿÔîV$ü^ßl’ÜŠ¸ #]4îì;ôOÏ²~¾f/h|û’à¦µÅÙŸIâFÓO%îîLZĞy÷˜›ÿ/¦±Ş€r•©±¤Û59ÑìB‰â9ÙQãoÈƒ{'™,H´mşà†È›Ë_\¤è³	)ï`îæ4œİ 8¹oãÀËƒİ}dê~åtAê7ĞÌiÃ Hö€]×ÿ¹¢p’[Y ĞLK…B9Ìİ<tÀõ©¥@>"€øf(ÎùÊÏß…—MJddPG³¬¦R 6	•$¡ÆĞ‚M$Ú£ãA ƒ{€5`Q¡@ìs´ln†ÏCU½i³€a]ÓPã_Üµ|ËëPnŸ¾ÿ­¸\g7÷½“ÉHéÅN• —0¾i+Ğ»:ovô{³µÓUqóz^ñ'; -ë¬_7ì°¤!Ğé“R4AÚ,n²’³qÌe6\ãs	qúÏÿeà,Îç¶›ÍB­¾)°Øqfo‹»îÃ«‘ÃÀÖÄ¨ËŞbf<±İ3Bšq~\‹l”­ş œ€lìÒ†ù½Ã~E²:g_¦Á5pÙgáò¿g®´ÈLl›Êçu<·q)X±ôg´CÎ€ÈÏC²Ú»$%¶5/ß­sÃwÓEÍ6Tæ¡ûÿš$nF”ı1êN5Jµ­âÒ&icúÅ›á>Çs(š!©òÿDéwKâºqA9?çDõ^È˜j×Ø“­	51÷ã«?†–ªÁ:Äz{ı½±H_ŸÊ¡ŸkD[å[8îA\J¬Ê]e£½²°¨³Aòp‹CÒ_Ü/€Ğ”¤&J©ú8¯l¢#ŠÇÓêë\3ä)FèŠ±9Â·k"ŠNû’Ë§7“÷rèXR¦®iÙáI’+|uG[ÁACVZft°}@'îåıÈ‰´¬BÜ.·Hòêz5LÀ[5@o%´Áf@OáşõWø³ÑFÍ7«	!û}ÂF §a™|ù„‘c
²N¢9Ì§¼óÀ	õ9NÈtQ¥€ôr“YÛèÚ ½×Xìx)çb{ÖÕö®G;œËè"Á÷WfôòÓu(¼,KÊ¬ÒwZkãõñ9š»cÄŒıKº²!w^R¯øØ=¹ĞÅ‹£”<-–ó‰*®SÂ$0…¶Û˜7yo‡Ëk;db†~KfÇ’_Û	HôåÿÍ)gt•Z, I—¢ê¤à˜¦¢N‚ó0f¥Îdìóed‚R
¸)"±]z´6ô…BÜ_ÏŠ\m¸ÎÁ„‡‘†*ŒƒÃõ0b7ÿùCÇÇ]Z¢G
Ó’Ö“Œøº|eCŠê±¹ZícŠt-éÛÁŒ]şzXO©Fj¼TV^¯qôÎ#»/ØñÌÛbğû¦úeÑ_Gjr¤bÌ0ñ(úámoöÉo‹ZóÑ¹É~>­Z/z4FÿB¡ÑcĞjÏP%–à3L\Çêşõ„ßRDo5°jß9Yá!Öå›V¹«ˆ§O¥©•ÿÔËÒñÁUÔéˆ)(h òˆ^Œ¡&¦WÚèK-l¡:Œp=ş"¨Oó<rÓ”*™¦Rş:”Ü;¾‰ÿYš]ëC2©cî·®óöDYı’‘È'I9=å¯=BK­Î±ÓÔçfÀ†¢}Áşw•šÏD¨še7ˆ^ `‹ŠäËé35<UáfŸxô"ÙSš Š$şßŞ–hc]¸; ¯ 3&?æq¶?‘šÎ•wNc"$ÛÒfšªá¨rùPıùV‘×%ãe7Ò{ÉJÏ±{Hƒé` è´bjçœ±ºgµĞ÷…‰v›†ÔZaWåZ·042Ó£ÃêaêŞÀeµnú±m;Ê4SƒnR/€JÆÑ¶ÉÎ ˜HèµËo÷ù‚ÑyJ^xØE
fæD¾©îa†àß©(ÅúoÕ¹¼K]D˜ëh¡PúÙ¤/	ßG—Ê1¡Ó)QTTÅb3©,¡ÁšKr§Œ´Ñ‰ë-Nø|¾™àp ®©á:\Œ=XqyrÀ;0á†€ÕşÅÙ¦UJA-Ú!#>0½1~í+üHëJÍ‡fdèøèŠÅ$wş´å÷Û!¹ SL*’Ë~c°¸ëÀ–še_Lâ'Ä·új¶jËÁµ„2V7œå¼˜ÑµYyÍyp”(jÆuÚÙL[?deCg;´¥·¤—u‡$Q?®ltø)Zå'b}:¿KòH‚oĞsc~ş‚PY;Œ9\ ÚBî•Ü:­0¦xñ+áÒÍ @Kïìld&Dûº,áw }0)öÈîG…!@>	¹«.7~ÁËşíÄ^µÁŠ&ü!ù¸ûšõ<}õñô\Zùï§spkvxü‡›‡ŒğRèah+A`AU&İXõc³Î½s*U’QyõX—÷^µ~&¤ö"(Eå”ª'£­Õ/{Ï®¨©N.à!sb†¶®>…üóĞøvunĞwG‰ÅJÂ›L`÷bæ§Á* ~¨6ÃAb|BÃLâ¨úÄÓ½:^T<Ì„š‡·›8äÇ%+šÎ˜}şk¶nåËì²ŞÒŒ“@aY‡ÕÛ38êË’¾²²¢ø92~G!O%èÑ:{uõ9(ÛÎ}‹2‘ÎC¯X.´Ğ2©éy¤	–ƒ:=½¬YÓG‡ßgØàôŞ$­â=Âp=e¿÷XzÈq³ÎPAUo˜àwI¼ëñtSIªşGÃ¦8¡¹òÙQ­ÙT¿ô˜}?ÌówjªÒşZ¥Åƒ„…ù©ÅB5sY€¡R*1h¡¬•3ÑYyüHnO©«0 Œ@š9t%K“±ä‹¬Öë~İ‘VïNÜ;yvhù'"h£À¡•Ç…#è]n`›œm&„?Ğ:÷0vzk¶l±V!ÇiÑËe‚{”+Cµ¹`õ@í_lZ§ÃZWæ<Ã˜el<üú1ºIàó!éƒèqÂ@I‰q%9Ó÷¨>²|=.3+¦rÂ¿±ü¬ß[ßlnüÉ@‘& ×ğe¼XF¡h~H%sÿ·s!s¿ÄäğG0ªŠÔ
ÏÎöÔ§h· kY$5¦í•:aJ®—­èàªR="«rÁ^©[wú %Ç¢n¢“öÄ„8Dæ4;YöÜÔu±R“<ëZëj{n`U2ì„TãËé†2äİ'à:n^ˆ³¤Lî*p,»I©©±ÓÇá¤Ïxv‘‰Â)ªU!YT!°¨0ÁWúS¬§4"<— LZ·}¡¸u|-˜Y°G¸O‚­4iÚÚD²ˆ^1`òÑ²wş}"ãÄãâğ9Ã=É‰ßXØvïğ]yuîÂ©¡(;PLMZşÓ?÷8µ÷|4šh–n¤ünr¹1WWRY>´<½¼wŠX”òxì¬ÅwV°ó;Ğøh ø  ,8A›$lı¬†ÆXˆPèˆ}0¤İg2q›+@bJ»–ˆ €ÓsCa€ŞŠ”ÚC¸¯kÜR¶CEWIÕˆP‚¤ªª-¬Ü7NÇ%PN<ÃV®—A"ö•æîx›V°D[Úu'Õ¥‚@Wó0	ZÊÈÜ‹LŒAÒAûÌÑ\ó=ôn6Ü4 ,;/at—GMyfãKd¾~³ `°1¨ó¢´È)iIØ³Ïu®&mc³B¤gPIO††ÒOœ–`ñ#ë}ÉLR¬-^Œ•œY«¥àéĞ#TëÊiµé¯ÀÑ‚ÍæíŞ†a¿¶mR=¢ÑHV&N ${óú–(¨f‚mìo/˜õ>›ä>º'¬¸å
Ô ¿|å¢³æ¯N1y–äñÁ—f\|ƒ…ïb‡L»ÈÈ):ü7»	ÇÎz®*`{nu¬`¼aV7l.«¢eE$ÂÁiÀ8vX,Óò>ÉÆBåzMzFK‚ù<âfå({•‡ÄbîxÁ‰`6<õ²lÍ rZ2†54ù§f·Ùßé!5¤>?}Ê’	Ë=Yø}"ÅÖ =h<§‡|AµvEk\:cÕĞ˜·âÃ¸NP%	¡GÅ)-âbAîâ(äI)C}«'è~¬í”ê¿Ó=—?¸_0i–%Ü·c&,\Éˆ–úÇppşõx0¹©`º
¥d²M‡ß,˜ñº}ƒŞ°IvÁkÇÇuWgçhğ%”?t=t²b}µ°vKöÇî<~S~¾ñãòëğùö®Â‰#m#ÜÔCnòòKîcŒgî?“¨ ™\n¯ãŸÈ¨	EZÙÇc‡ûü
"m¤v`ë™{Õì²cİW}~Û™ ZM’Ş¢Pà/ú4¶lÌæé:ä
Gü’Ñ	
‘A"x`è¿[9Ö½0Um¿ßƒ‹)QšAQçş­N¤¹É•R…Íân2ƒØ+ûNŞ!¾®6í=äOYSFN»çº]?KLÉ*w®;ôûD2cvæ.&­moWÕ|Y†÷; j£`µ–«˜&¢dYCSÑ¬+"B2Å‹¬«Ë"±4Ì¦C³'{2(lç“ä]ã¡÷ù3wcø»3E°x¹ıÆ×ş¬  xªëf–rÂaí°G¼:åb^O*Ö&Ùœé[‡ı8Í'é#+oòQ&ÄkÀƒ6,ë"h®"Up{SÒ_^‚vÁ=L#Viëî8HkwàR¯P“dšİ0(ß$´g0ë€ÉçñCkî1{‡ÀtF÷ß_îUH¿÷-S²W¹zâ_¾·£ ËZE$Û.Ÿ¶qĞ‡Ì›g½¸e.×8ïÃkÁkU3·Dá
²>)’a+ı‹‚]°T["òæâr~òüÛåGnîË*>Ög§ğ?L ÷÷c^$ÛUâÔª"´cxzo‹8ÈüGx·„¢ÈæƒùÅch<Ñ‚„ôx¤ƒĞ)Êú(éˆå3Lí„Jÿ`™=õÊîAtLIÊkdÿğ+H-µs¨xŠ‚›B_1¾BF¦ø™ÍÀ™\•\ê®ËìN}p0Ü .‘Í7ôº‰¯*Ú‡O}@8P7ËŒZççG•Sâø÷YMn@Şu„Ç°ò-İ—w¦ÇÊ Ds%®zçP”B.×ô§ßø!ãå®®á-ü¾O¬·oï¹w¢]ËdÂ³®V™”ƒÿ~ó7Ùö/€­ùÒİ-¿R^it¿·X^!bŸqútEĞ->e“…=YoF|å­ƒÔ†ëá![U¼ ØbwÍKm¦;’C‹<Î¿÷âŒ"X|è•õ¾±Vé=”¤Un9/kºñ’RŸ²ÔSH6°6åQw3p‰¡”ë]­0ˆ|»6küÌ'¿2Ë¾u¥’*;¬^mí¦z2µ­!BŠh%M¥^4ƒİ$|qÈ÷Ÿ{9ÍAÄıú›ÛP‘û…˜A,<Ö!öo+ËÔ£²+Ì |ÍBºoø&¢òl_]I
"1)@}\¢£¯û$&“éĞ~Xtõ]D„'ßîjU"¼FdöÅ³³dóíK‡¨ƒ«»¥šş+÷ØVéÉÊÿÀM%*‡ÿÍÆÜWEHpdGÏí´–‚ÎwÜª"Ë¶ó›WØjQì›TÔÓ’ş	»è)›ü»~š½õ‡„—šb¡ÌxŒy¾ò— ÊD“—ò}Íy‚À¸XğÌÆ7CRyè9í‹ÄJ%9-qUé[öHgMªÏV ‘óÔ”¿-aáõŞM+§õÎyÏfêSt'ì¦‚7Œ%ß+˜³EÙ,=¦}`¦
GêFZ¬T~Ø-DÔÇyuu—æsá¤uÏ¡äeÌƒÛXº? ‚wŠ.îdL’WiÒÍ[â¢µÓÊdë	“,ÖLè„)]İ*øç
×ƒÌÁHLëå\¹ôÙS‚q«’ùœ¢Ÿ96*zcC\&º%¬OõĞG‹ÏC¯à
TCvÆv_s£Ïxvï!ú_ó
MÌ8ŸLkı§2áuÄû.Qb Ğ“ø£;é}g¨kv‘Î-Š|ÇM®ôÊåRg‘»õî·š”aÇº¯òñ±	œµç+ Ğæ¢µ«ü\§}€ğö;ã¯kÍ×È›õ¼)ÓÊúvöK±ö%ãÓĞanV'´Æ™c-†Ø†X›uD?}nİ<Òxt*Ğl•à!çÛ04ôÏÙ™‹ H“ğ:ÒşGp•»³¡¼ ˜Ë±óÛèœÙÕï!"îñè¯*Y[£€>ŞWúnªDâd{UÆ9%õ±ívª¹¶¸ïÓF"ñ-xœ¼a²Ã|	¸Û÷¸rü¼ÂN’_›s›´¬‰è+‰5–Â‚Ü_+£™n‚™I,ä©¢L’›É@»Ä§•$; r}ŠCê_øz[ÚùÛ	‚+
oWŠÊÒ$’èÆŒÏ£É’„Â»mµ|Pùìş’U´ğ¨ØåÊıî2>²Ç4§Ö‡™x©>hBäypR›?´[îe2¡"E¯k†.RAß*ö ã\Xv[À9>dÂ' sH†ĞBö«cµW”¥“Ëi˜”íø¨ ¢E/
ÒüÏ/ê/.‚´ÑÍ:p ş\ØhÊ'¶V«\5“Tå@OpÎ“Ù¡–—†‘•„R$¬¥5Keyš¶˜'R›x:€kû >áé»Éü¥^L¿I¬™šê“ÌFDu#T€Õ´W™æ‚;“ó\õë/Ââ8BâlÕ<§°d¤cä´¯µ}dMOÚ =bX<ÜXûc3Æb¹
Éw*)&YkTR”+%Ôi8ío“GĞÕ¢òŞÏHã
úNe;°·Âyœ?NÁ¾†Şñ¡ëo×¡÷Ââ½*)TëŒ!Sô£É1ò†ReÔ%\EWšlóÂµ~û‹úkgYåLåŸ7QÚ×ø&9#®M„a8qóøŞ¹-õj8ƒD•6á8£ë½P(x¡Ğ|¯î+Üõ¢läçû…Ø"=ä(ç=dop F"ïP ”á³Ó÷B„Á«p‚êàqÂ¾ì\×¥qTt¡”ÙTŸÈ€Œ*MÀ(pwšé£Å‚ìêgUänKßoõwn×›Á‰Ÿ3*û#,{QÔ·‹'¨*Á$—‰o|±ÿ4>¸,¡}:Œ/“°uq\!ÊV$û¥”ª’yóC}!N@öÑkÊqK$Å”›¿”FÓ«çæàˆçóİiH$¤Ëµ™é4‹~±VDÜ¬µæ7ö½¨óñ H^’\¿¤Ÿó†Fv6J“³h_VæõBÈnØ»<¥µ`€?¿ôj. tK¤c¶^HnU×ñP	Î_Œàî7TñğõñYîöíãˆledßò›N«eV†\w5 O¢
:È¨qş\× Ñsäğ•"çŒÀê2½\f„ï(›ˆÜ¦³06ZG e¹–¾ìÀpV©,/uï:…jcÂ„¡t†¸ÒŞ©kAw=j Pzí®0kÕ'%75ıóDµ$€ıÙÎ_S*¨FT,X¸ÜsÑ­6
˜cÅ	h†gC¯a_e±„C#b‘IÏv/0ƒK<EÔÌs7×ğ~<zL/ÿ4öEÛ´ı€¬ù³úv†Æ|º?£ä-)ÀMnpdû¬d–¤ôóX¶/¤ÒÈ±½zP{±,óìJQö<Ì7áB95‚-Ë‡6–ŠÖae¦ì÷Ù±üïRôÅPY0¯¸Zk3Ä"œùÁĞ·Uqw©ƒ¯O\Äûü¦$Ç»<¤5=VÜÓÚò¢´?¸‹ı4ü>r%¾²ób ~ƒAåÅ[wKå„¯Á0üOÄ2êàu›¼µgfîLUY3‡ßP}ò›ÿNŠ’&®½Rµéazbëïãş9ÚÖ ]¡|¼¤ s®ìhéAşš¢İ®ÃMÊe2l:Ö«¨C_6fÒ.@(`S\ë•û;øSYåŠ¦$;=ÒIæùÌ…aX}&d”5¨qT[è„zŒ•nº ­‘å_Û…G-œ6,®/vw““± ‘6ï_é{E'Ù«.&jTŸÆ}ŒbªÆ(WW¢wTn%§‚ĞíµmÑ[[Å=â?c‡I»X‘—;>9x=,>öÌöa×†¤GÅ÷µ©Á¥’ó5ı;jğ*?±³Óqi-(éëotêƒ˜Øêf½bÉózGúâ7{]Z¿ñ7,üñKšòuíOXl*xÙ¿ªrZüğ*À‚šsÓvÔàvir±ßÂƒÒè!›_ß­ö+Ç: